<html>
	<head>
		<title>
			{{ $.Src }}
		</title>
		<link rel="stylesheet" href="/assets/styles/photos/album.css" />
	</head>

	<body>
    <header id="breadcrumbs">
      <a href="/">artur.co</a> &gt; {{ $.Type }}s &gt; {{ $.Src }}
    </header>

		<main>
      <table width="100%">
        <tr>
          <td rowspan="2">
            {{ if eq $.Type "photo" }}
              <img src="{{ $.ResizedURL }}" />
            {{ else if eq $.Type "video" }}
              <video src="{{ $.RawURL }}" controls></video>
            {{ end }}
          </td>

          <td valign="top" align="right" width="400">
            <table width="100%" id="exif">
              <tr>
                <td>
                  Filename:
                </td>
                <td align="right">
                  {{ $.Src }}
                </td>
              </tr>
              <tr>
                <td>
                  Timestamp:
                </td>
                <td align="right">
                  {{ $.Time.Format "Mon, Jan 1 2006 at 3:04:05pm MST" }}
                </td>
              </tr>
            </table>
          </td>
        </tr>
        <tr>
          <td valign="bottom" align="right" width="400">
            <div id="map" style="width: 400px; height: 200px; border: 1px solid #ccc"></div>
            <br>
            <div><code>{{ $.Location.String }}</code></div>

            <script src="http://d3js.org/d3.v3.min.js"></script>
            <script src="http://d3js.org/topojson.v1.min.js"></script>
            <script>

              var width = 400,
                  height = 200;

              var projection = d3.geo.equirectangular()
                  .scale(70)
                  .translate([width / 2, height / 2])
                  .precision(.1);

              var path = d3.geo.path()
                  .projection(projection);

              var graticule = d3.geo.graticule();

              var svg = d3.select("#map").append("svg")
                  .attr("width", width)
                  .attr("height", height);

              svg.append("path")
                  .datum(graticule)
                  .attr("class", "graticule")
                  .attr("d", path);

              d3.json("/assets/data/world.json", function(error, world) {
                svg.insert("path", ".graticule")
                    .datum(topojson.feature(world, world.objects.land))
                    .attr("class", "land")
                    .attr("fill", "#CCC")
                    .attr("d", path);
              });

              var coords = projection([{{ $.Lng }}, {{ $.Lat }}]);

              svg.append("circle")
                  .attr("cx", coords[0])
                  .attr("cy", coords[1])
                  .attr("r", 3)
                  .attr("fill", "black")


              debugger;
            </script>
          </td>
        </tr>
      </table>
    </footer>
	</body>
</html>
